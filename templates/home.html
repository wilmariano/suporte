<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8">
<html>
  <title>SUPORTE</title>
  <head>
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://s2.glbimg.com/BmX3tM8HgOpDmBpVzdJDkxA1Jrk=/0x0:400x400/984x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_59edd422c0c84a879bd37670ae4f538a/internal_photos/bs/2018/Z/p/LvrSncTxGodAiaEbwLgQ/pegabot.jpg"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        body {
          font-family: monospace;
        }
        h1 {
          background-color: yellow;
          display: inline-block;
          font-size: 3em;
          margin: 0;
          padding: 14px;
        }
        h3 {
          color: black;
          font-size: 20px;
          margin-top: 3px;
          text-align: center;
        }
        #chatbox {
          margin-left: auto;
          margin-right: auto;
          width: 40%;
          margin-top: 10%;
        }
        #userInput {
          margin-left: auto;
          margin-right: auto;
          width: 100%;
        }
        #textInput {
          width: 90%;
          border: none;
          border-bottom: 3px solid black;
          font-family: monospace;
          font-size: 17px;
        }
        .userText {
          color: white;
          font-family: monospace;
          font-size: 17px;
          text-align: right;
          line-height: 30px;
        }
        .userText span {
          background-color: #808080;
          padding: 10px;
          border-radius: 2px;
        }
        .botText {
          color: white;
          font-family: monospace;
          font-size: 17px;
          text-align: left;
          line-height: 30px;
        }
        .botText span {
          background-color: #4169e1;
          padding: 10px;
          border-radius: 2px;
        }
        #tidbit {
          position: absolute;
          bottom: 0;
          right: 0;
          width: 300px;
        }
        .boxed {
          margin-left: auto;
          margin-right: auto;
          width: 78%;
          margin-top: 60px;
          border: 1px solid green;
        }
        .box {
          border: 2px solid black;
        }
    </style>
  </head>
  <body>  
    <div class="row">
      <span class="col">
        <img class="img-fluid d-block mx-auto" style="position:relative;float:left;border-radius: 50%;width:35px;height:35px;" src="https://s2.glbimg.com/BmX3tM8HgOpDmBpVzdJDkxA1Jrk=/0x0:400x400/984x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_59edd422c0c84a879bd37670ae4f538a/internal_photos/bs/2018/Z/p/LvrSncTxGodAiaEbwLgQ/pegabot.jpg" alt="">    
      </span>
      <span style="font-family: monospace;font-size: 17px;" class="col">SUPORTE</span>
      <hr>
    </div>
    <!--     <div class="boxed"> -->
    <div id="chatbox">
      <p class="botText">
<!--         <span>
          teste
        </span> -->
<div class="accordion accordion-flush" id="accordionFlushExample">
  <div class="accordion-item">
    <h2 class="accordion-header" id="flush-headingOne">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
        Qual motivo desse Bot ter sido desenvolvido?
      </button>
    </h2>
    <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
      <div class="accordion-body">Auxiliar com suporte técnico pessoas leigas em TI.</div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="flush-headingTwo">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
        Este robô vai ficar pra sempre no ar? com este endereço de IP?
      </button>
    </h2>
    <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
      <div class="accordion-body">Não, é apenas um teste. A ideia é que em 2023 ainda esteja definitivo em um sub-domínio.</div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header" id="flush-headingThree">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
        Não obtive resposta que procurava!
      </button>
    </h2>
    <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
      <div class="accordion-body">Esta lista (FAQ) foi o suporte nível 01, Pode digitar sua pergunta no campo abaixo, caso o robô (nível 02) não saiba te responder, pergunte pessoalmente <a class="w-100 btn btn-lg btn-secondary" href="https://api.whatsapp.com/send?phone=5511941150619&text=Olá, gostaria de tirar uma dúvida contigo!"style="text-decoration:none;color: white;">clicando aqui (nível 03).</a></div>
    </div>
  </div>
</div>          
      </p>
    </div>
    <div id="userInput" class="input-group">
      <span class="input-group-text"><i class="fas fa-microphone" onclick="runSpeechRecognition()"></i></span>
      <input id="textInput" type="text" name="msg" placeholder="Message" class="form-control" />
    <!--           <i class="fas fa-volume-up" id="btnSpeak"></i> -->
    <!--             <button type="button" onclick="runSpeechRecognition()">Falar com Bot</button> &nbsp; <span id="action"></span>
                <button id="btnSpeak">Ouvir Bot</button> -->
    </div>
    <!--     </div> -->
  </body>
  <!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  <script>
    var falar = "";
    function getBotResponse() {
      var rawText = $("#textInput").val();
      var userHtml = '<p class="userText"><span>' + rawText + "</span></p>";
      $("#textInput").val("");
      $("#chatbox").append(userHtml);
      document
        .getElementById("userInput")
        .scrollIntoView({ block: "start", behavior: "smooth" });
      $.get("/get", { msg: rawText }).done(function(data) {
        var botHtml = '<p class="botText"><span>' + data + "</span></p>";
        falar = data;
        $("#chatbox").append(botHtml);
          document
            .getElementById("userInput")
            .scrollIntoView({ block: "start", behavior: "smooth" });
      });	 
    }
    $("#textInput").keypress(function(e) {
      if (e.which == 13) {
        getBotResponse();
      }
    });
		function runSpeechRecognition() {
		  // get output div reference
		  var output = document.getElementById("textInput");
		  // get action element reference
		  var action = document.getElementById("action");
      // new speech recognition object
      var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;
      var recognition = new SpeechRecognition();
            
      // This runs when the speech recognition service starts
      recognition.onstart = function() {
          action.innerHTML = "<small>listening, please speak...</small>";
      };
      recognition.onspeechend = function() {
          action.innerHTML = "<small>stopped listening, hope you are done...</small>";
          recognition.stop();
      }
              
      // This runs when the speech recognition service returns result
      recognition.onresult = function(event) {
          var transcript = event.results[0][0].transcript;
          var confidence = event.results[0][0].confidence;
          // output.innerHTML = "<b>Text:</b> " + transcript + "<br/> <b>Confidence:</b> " + confidence*100+"%";
          //output.classList.remove("hide");
		      $("#textInput").val(transcript);
      };
      // start recognition
      recognition.start();
    }


    var btnSpeak = document.querySelector('#btnSpeak');
    speaks = [
      {
        "name": "Clarinha",
        "lang":"pt-BR"
      }
    ]
    btnSpeak.addEventListener('click', () => {
      const msg = new SpeechSynthesisUtterance();
      msg.volume = 1; //define o volume do áudio (de 0 a 1)
      msg.rate = 1; // define a velocidade do áudio (0.1 a 1)
      msg.pitch = 1; // define o tom em que o áudio é falado ( de 0 a 2)
      msg.text = falar;
    
    
      const voice = speaks[0];
      // console.log(`Voice: ${voice.name} and Lang: ${voice.lang}`);
      voice.voiceURI = voice.name; //voiceURI busca o servidor da voz escolhida, no caso, pt-BR defnido em voice.name
      msg.lang = voice.lang; // Define o idioma a ser utilizado para a fala, no caso, o que foi definido para voice.lang
    
      speechSynthesis.speak(msg); //executa a voz
    });
  </script>
  <!-- Footer -->
  <footer class="py-3 bg-dark">
    <div class="container">
      <p class="m-0 text-center text-white">Copyright © Botmaker williansmarianos 2023</p>
    </div>
    <!-- /.container -->
  </footer>
</html>

